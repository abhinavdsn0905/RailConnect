{% extends "adminpanel/admin_base.html" %}
{% block page_title %}Reports{% endblock %}
{% block n_reports %}active{% endblock %}
{% block topbar_title %}Reports & Analytics{% endblock %}
{% block topbar_badge %}<span class="topbar-pill">Insights</span>{% endblock %}

{% block content %}

<div class="ph">
    <div class="ph-title">ğŸ“ˆ Reports & Analytics</div>
    <div class="ph-sub">Overview of booking performance and revenue</div>
</div>

<!-- STATS -->
<div class="stats-grid">
    <div class="sc green">
        <div class="sc-label">Total Bookings</div>
        <div class="sc-value">{{ total_bookings }}</div>
    </div>
    <div class="sc amber">
        <div class="sc-label">Total Revenue (â‚¹)</div>
        <div class="sc-value">{{ total_revenue|floatformat:0 }}</div>
    </div>
</div>

<!-- TOP ROUTES TABLE -->
<div class="t-wrap">
    <div class="t-header">
        <span class="t-header-title">ğŸ† Top Trains by Bookings</span>
    </div>
    <table>
        <thead>
            <tr>
                <th>#</th>
                <th>Train</th>
                <th>Train Number</th>
                <th>Bookings</th>
                <th>Revenue</th>
            </tr>
        </thead>
        <tbody>
            {% for route in top_routes %}
            <tr>
                <td>
                    {% if forloop.counter == 1 %}
                        <span style="font-size:16px;">ğŸ¥‡</span>
                    {% elif forloop.counter == 2 %}
                        <span style="font-size:16px;">ğŸ¥ˆ</span>
                    {% elif forloop.counter == 3 %}
                        <span style="font-size:16px;">ğŸ¥‰</span>
                    {% else %}
                        <span class="dim-cell">{{ forloop.counter }}</span>
                    {% endif %}
                </td>
                <td><strong>{{ route.train__train_name }}</strong></td>
                <td class="mono-cell">{{ route.train__train_number }}</td>
                <td><span class="badge badge-blue">{{ route.count }}</span></td>
                <td><span class="badge badge-green">â‚¹{{ route.revenue|floatformat:0 }}</span></td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5">
                    <div class="empty">
                        <div class="empty-icon">ğŸ“Š</div>
                        <p>No booking data available yet.</p>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}